<div class="dashboard-container">
  <h2><i class="fas fa-chart-bar"></i> Resumen Financiero</h2>
  
  <div class="summary-header">
    <div class="period-selector">
      <select id="resumenPeriodo">
        <option value="mensual">Vista Mensual</option>
        <option value="anual">Vista Anual</option>
      </select>
    </div>
    <div class="export-options">
      <button id="exportResumen" class="btn-secondary">
        <i class="fas fa-file-export"></i> Exportar Datos
      </button>
    </div>
  </div>
  
  <!-- KPIs principales -->
  <div class="kpi-cards">
    <div class="kpi-card">
      <div class="kpi-icon income">
        <i class="fas fa-money-bill-wave"></i>
      </div>
      <div class="kpi-content">
        <h3>Ingresos Totales</h3>
        <div class="kpi-value" id="kpiIngresos">$0</div>
        <div class="kpi-trend" id="kpiIngresosTrend">--</div>
      </div>
    </div>
    
    <div class="kpi-card">
      <div class="kpi-icon expense">
        <i class="fas fa-hand-holding-usd"></i>
      </div>
      <div class="kpi-content">
        <h3>Gastos Totales</h3>
        <div class="kpi-value" id="kpiGastos">$0</div>
        <div class="kpi-trend" id="kpiGastosTrend">--</div>
      </div>
    </div>
    
    <div class="kpi-card">
      <div class="kpi-icon balance">
        <i class="fas fa-balance-scale"></i>
      </div>
      <div class="kpi-content">
        <h3>Balance</h3>
        <div class="kpi-value" id="kpiBalance">$0</div>
        <div class="kpi-trend" id="kpiBalanceTrend">--</div>
      </div>
    </div>
    
    <div class="kpi-card">
      <div class="kpi-icon savings">
        <i class="fas fa-piggy-bank"></i>
      </div>
      <div class="kpi-content">
        <h3>Ahorro</h3>
        <div class="kpi-value" id="kpiAhorro">$0</div>
        <div class="kpi-trend" id="kpiAhorroTrend">--</div>
      </div>
    </div>
  </div>
  
  <!-- Gráficos y tablas -->
  <div class="charts-grid">
    <div class="chart-container">
      <h3>Distribución de Gastos</h3>
      <div id="gastosChart" class="chart-placeholder">
        <canvas id="gastosChartCanvas"></canvas>
      </div>
    </div>
    
    <div class="chart-container">
      <h3>Evolución Mensual</h3>
      <div id="evolucionChart" class="chart-placeholder">
        <canvas id="evolucionChartCanvas"></canvas>
      </div>
    </div>
    
    <div class="table-container full-width">
      <h3>Detalle por Categoría</h3>
      <div class="table-responsive">
        <table id="categoriasTable">
          <thead>
            <tr>
              <th>Categoría</th>
              <th>Presupuesto</th>
              <th>Gastado</th>
              <th>Disponible</th>
              <th>% Utilizado</th>
            </tr>
          </thead>
          <tbody id="categoriasTableBody">
            <!-- Los datos se cargarán dinámicamente -->
          </tbody>
        </table>
      </div>
    </div>
    
    <div class="table-container full-width">
      <h3>Transacciones Recientes</h3>
      <div class="table-responsive">
        <table id="transaccionesTable">
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Categoría</th>
              <th>Descripción</th>
              <th>Monto</th>
              <th>Tipo</th>
            </tr>
          </thead>
          <tbody id="transaccionesTableBody">
            <!-- Los datos se cargarán dinámicamente -->
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  initializeResumen();
});

function initializeResumen() {
  // Cargar datos del resumen
  loadResumenData();
  
  // Configurar evento para cambio de periodo
  const periodoSelect = document.getElementById('resumenPeriodo');
  if (periodoSelect) {
    periodoSelect.addEventListener('change', function() {
      loadResumenData();
    });
  }
  
  // Configurar botón de exportación
  const exportBtn = document.getElementById('exportResumen');
  if (exportBtn) {
    exportBtn.addEventListener('click', exportResumenData);
  }
}

function loadResumenData() {
  const periodo = document.getElementById('resumenPeriodo').value;
  
  if (periodo === 'mensual') {
    loadResumenMensual();
  } else {
    loadResumenAnual();
  }
}

function loadResumenMensual() {
  const k = ensureMonth();
  
  // Calcular KPIs
  const ingresos = calcularTotalIngresos(k);
  const gastos = calcularTotalGastos(k);
  const balance = ingresos - gastos;
  const ahorro = calcularAhorro(k);
  
  // Actualizar KPIs
  document.getElementById('kpiIngresos').textContent = fmt(ingresos);
  document.getElementById('kpiGastos').textContent = fmt(gastos);
  document.getElementById('kpiBalance').textContent = fmt(balance);
  document.getElementById('kpiAhorro').textContent = fmt(ahorro);
  
  // Calcular tendencias (comparación con mes anterior)
  const tendencias = calcularTendencias(k);
  document.getElementById('kpiIngresosTrend').innerHTML = tendencias.ingresos;
  document.getElementById('kpiGastosTrend').innerHTML = tendencias.gastos;
  document.getElementById('kpiBalanceTrend').innerHTML = tendencias.balance;
  document.getElementById('kpiAhorroTrend').innerHTML = tendencias.ahorro;
  
  // Cargar gráficos
  renderGastosChart(k);
  renderEvolucionChart(k);
  
  // Cargar tablas
  loadCategoriasTable(k);
  loadTransaccionesTable(k);
}

function calcularTotalIngresos(k) {
  let total = 0;
  
  // Sueldo
  if (state[k].sueldo) {
    total += state[k].sueldo.reduce((sum, record) => sum + record.monto, 0);
  }
  
  // Otros ingresos (puedes agregar más categorías aquí)
  
  return total;
}

function calcularTotalGastos(k) {
  let total = 0;
  
  // Servicios
  if (state[k].servicios) {
    total += state[k].servicios.reduce((sum, record) => sum + record.monto, 0);
  }
  
  // Mamá
  if (state[k].mama) {
    total += state[k].mama.reduce((sum, record) => sum + record.monto, 0);
  }
  
  // Tarjetas
  if (state[k].tarjetas) {
    total += state[k].tarjetas.reduce((sum, record) => sum + record.monto, 0);
  }
  
  // Delivery
  if (state[k].delivery) {
    total += state[k].delivery.reduce((sum, record) => sum + record.monto, 0);
  }
  
  // Transporte
  if (state[k].transporte) {
    total += state[k].transporte.reduce((sum, record) => sum + record.monto, 0);
  }
  
  // Mascotas
  if (state[k].mascotas) {
    total += state[k].mascotas.reduce((sum, record) => sum + record.monto, 0);
  }
  
  // Salud
  if (state[k].salud) {
    total += state[k].salud.reduce((sum, record) => sum + record.monto, 0);
  }
  
  // Deportes
  if (state[k].deportes) {
    total += state[k].deportes.reduce((sum, record) => sum + record.monto, 0);
  }
  
  // Salidas
  if (state[k].salidas) {
    total += state[k].salidas.reduce((sum, record) => sum + record.monto, 0);
  }
  
  // Cochera
  if (state[k].cochera) {
    total += state[k].cochera.reduce((sum, record) => sum + record.monto, 0);
  }
  
  // Lucy
  if (state[k].lucy) {
    total += state[k].lucy.reduce((sum, record) => sum + record.monto, 0);
  }
  
  // Cristina
  if (state[k].cristina) {
    total += state[k].cristina.reduce((sum, record) => sum + record.monto, 0);
  }
  
  return total;
}

function calcularAhorro(k) {
  const ingresos = calcularTotalIngresos(k);
  const gastos = calcularTotalGastos(k);
  return Math.max(0, ingresos - gastos);
}

function calcularTendencias(k) {
  // Obtener mes anterior
  const currentDate = new Date(currentSelectedYear, currentSelectedMonth);
  const prevDate = new Date(currentDate);
  prevDate.setMonth(prevDate.getMonth() - 1);
  
  const prevKey = `${prevDate.getFullYear()}-${(prevDate.getMonth() + 1).toString().padStart(2, '0')}`;
  
  // Calcular valores del mes anterior
  const prevIngresos = state[prevKey] ? calcularTotalIngresos(prevKey) : 0;
  const prevGastos = state[prevKey] ? calcularTotalGastos(prevKey) : 0;
  const prevBalance = prevIngresos - prevGastos;
  const prevAhorro = state[prevKey] ? calcularAhorro(prevKey) : 0;
  
  // Calcular valores actuales
  const currentIngresos = calcularTotalIngresos(k);
  const currentGastos = calcularTotalGastos(k);
  const currentBalance = currentIngresos - currentGastos;
  const currentAhorro = calcularAhorro(k);
  
  // Calcular diferencias porcentuales
  const diffIngresos = prevIngresos ? ((currentIngresos - prevIngresos) / prevIngresos) * 100 : 0;
  const diffGastos = prevGastos ? ((currentGastos - prevGastos) / prevGastos) * 100 : 0;
  const diffBalance = prevBalance ? ((currentBalance - prevBalance) / Math.abs(prevBalance)) * 100 : 0;
  const diffAhorro = prevAhorro ? ((currentAhorro - prevAhorro) / prevAhorro) * 100 : 0;
  
  // Formatear tendencias
  return {
    ingresos: formatTrend(diffIngresos),
    gastos: formatTrend(diffGastos),
    balance: formatTrend(diffBalance),
    ahorro: formatTrend(diffAhorro)
  };
}

function formatTrend(value) {
  if (isNaN(value) || value === 0) return '--';
  
  const absValue = Math.abs(value).toFixed(1);
  const icon = value > 0 ? '▲' : '▼';
  const color = value > 0 ? '#10b981' : '#ef4444';
  
  return `<span style="color: ${color}">${icon} ${absValue}%</span>`;
}

function renderGastosChart(k) {
  const ctx = document.getElementById('gastosChartCanvas');
  if (!ctx) return;
  
  // Datos de ejemplo para el gráfico de gastos
  const gastosPorCategoria = {
    'Servicios': state[k].servicios ? state[k].servicios.reduce((sum, record) => sum + record.monto, 0) : 0,
    'Tarjetas': state[k].tarjetas ? state[k].tarjetas.reduce((sum, record) => sum + record.monto, 0) : 0,
    'Salidas': state[k].salidas ? state[k].salidas.reduce((sum, record) => sum + record.monto, 0) : 0,
    'Delivery': state[k].delivery ? state[k].delivery.reduce((sum, record) => sum + record.monto, 0) : 0,
    'Transporte': state[k].transporte ? state[k].transporte.reduce((sum, record) => sum + record.monto, 0) : 0,
    'Otros': calcularTotalGastos(k) - (
      (state[k].servicios ? state[k].servicios.reduce((sum, record) => sum + record.monto, 0) : 0) +
      (state[k].tarjetas ? state[k].tarjetas.reduce((sum, record) => sum + record.monto, 0) : 0) +
      (state[k].salidas ? state[k].salidas.reduce((sum, record) => sum + record.monto, 0) : 0) +
      (state[k].delivery ? state[k].delivery.reduce((sum, record) => sum + record.monto, 0) : 0) +
      (state[k].transporte ? state[k].transporte.reduce((sum, record) => sum + record.monto, 0) : 0)
    )
  };
  
  // Filtrar categorías con gastos
  const categorias = Object.keys(gastosPorCategoria).filter(cat => gastosPorCategoria[cat] > 0);
  const montos = categorias.map(cat => gastosPorCategoria[cat]);
  
  // Colores para el gráfico
  const colores = ['#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6', '#6b7280'];
  
  // Renderizar gráfico (implementación básica)
  ctx.innerHTML = `
    <div style="padding: 20px; text-align: center;">
      <h4>Distribución de Gastos</h4>
      <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin-top: 20px;">
        ${categorias.map((categoria, index) => `
          <div style="text-align: center;">
            <div style="width: 50px; height: 50px; background: ${colores[index]}; border-radius: 50%; margin: 0 auto 10px;"></div>
            <div style="font-weight: 600;">${categoria}</div>
            <div style="font-size: 0.9rem; color: #6b7280;">${fmt(gastosPorCategoria[categoria])}</div>
          </div>
        `).join('')}
      </div>
      ${categorias.length === 0 ? '<p style="color: #6b7280; font-style: italic;">No hay datos de gastos para mostrar</p>' : ''}
    </div>
  `;
}

function renderEvolucionChart(k) {
  const ctx = document.getElementById('evolucionChartCanvas');
  if (!ctx) return;
  
  // Datos de ejemplo para el gráfico de evolución
  const meses = ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'];
  const ingresosData = Array(12).fill(0).map(() => Math.random() * 5000000);
  const gastosData = Array(12).fill(0).map(() => Math.random() * 3000000);
  
  // Renderizar gráfico (implementación básica)
  ctx.innerHTML = `
    <div style="padding: 20px;">
      <h4 style="text-align: center; margin-bottom: 20px;">Evolución Mensual</h4>
      <div style="display: flex; align-items: end; height: 200px; gap: 10px; justify-content: center;">
        ${meses.map((mes, index) => {
          const ingresoHeight = (ingresosData[index] / 5000000) * 150;
          const gastoHeight = (gastosData[index] / 3000000) * 150;
          return `
            <div style="display: flex; flex-direction: column; align-items: center; height: 100%;">
              <div style="display: flex; align-items: end; gap: 3px; height: 150px;">
                <div style="width: 15px; height: ${ingresoHeight}px; background: #10b981; border-radius: 3px 3px 0 0;"></div>
                <div style="width: 15px; height: ${gastoHeight}px; background: #ef4444; border-radius: 3px 3px 0 0;"></div>
              </div>
              <div style="margin-top: 10px; font-size: 0.8rem;">${mes}</div>
            </div>
          `;
        }).join('')}
      </div>
      <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
        <div style="display: flex; align-items: center; gap: 5px;">
          <div style="width: 15px; height: 15px; background: #10b981; border-radius: 3px;"></div>
          <span>Ingresos</span>
        </div>
        <div style="display: flex; align-items: center; gap: 5px;">
          <div style="width: 15px; height: 15px; background: #ef4444; border-radius: 3px;"></div>
          <span>Gastos</span>
        </div>
      </div>
    </div>
  `;
}

function loadCategoriasTable(k) {
  const tbody = document.getElementById('categoriasTableBody');
  if (!tbody) return;
  
  // Datos de ejemplo para la tabla de categorías
  const categorias = [
    { nombre: 'Servicios', presupuesto: 50000, gastado: state[k].servicios ? state[k].servicios.reduce((sum, record) => sum + record.monto, 0) : 0 },
    { nombre: 'Tarjetas', presupuesto: 100000, gastado: state[k].tarjetas ? state[k].tarjetas.reduce((sum, record) => sum + record.monto, 0) : 0 },
    { nombre: 'Salidas', presupuesto: 30000, gastado: state[k].salidas ? state[k].salidas.reduce((sum, record) => sum + record.monto, 0) : 0 },
    { nombre: 'Delivery', presupuesto: 20000, gastado: state[k].delivery ? state[k].delivery.reduce((sum, record) => sum + record.monto, 0) : 0 },
    { nombre: 'Transporte', presupuesto: 15000, gastado: state[k].transporte ? state[k].transporte.reduce((sum, record) => sum + record.monto, 0) : 0 }
  ];
  
  tbody.innerHTML = categorias.map(cat => {
    const disponible = cat.presupuesto - cat.gastado;
    const porcentaje = cat.presupuesto > 0 ? (cat.gastado / cat.presupuesto) * 100 : 0;
    const porcentajeClass = porcentaje > 90 ? 'danger' : porcentaje > 75 ? 'warning' : 'success';
    
    return `
      <tr>
        <td>${cat.nombre}</td>
        <td>${fmt(cat.presupuesto)}</td>
        <td>${fmt(cat.gastado)}</td>
        <td>${fmt(disponible)}</td>
        <td>
          <div class="progress-bar">
            <div class="progress-fill ${porcentajeClass}" style="width: ${Math.min(porcentaje, 100)}%"></div>
            <span class="progress-text">${porcentaje.toFixed(1)}%</span>
          </div>
        </td>
      </tr>
    `;
  }).join('');
}

function loadTransaccionesTable(k) {
  const tbody = document.getElementById('transaccionesTableBody');
  if (!tbody) return;
  
  // Recolectar todas las transacciones
  let transacciones = [];
  
  // Función auxiliar para agregar transacciones
  const agregarTransacciones = (categoria, datos) => {
    if (datos && Array.isArray(datos)) {
      datos.forEach(record => {
        transacciones.push({
          fecha: record.fecha,
          categoria: categoria,
          descripcion: record.descripcion || record.lugar || record.servicio || 'Sin descripción',
          monto: record.monto,
          tipo: 'gasto'
        });
      });
    }
  };
  
  // Agregar transacciones de cada categoría
  agregarTransacciones('Servicios', state[k].servicios);
  agregarTransacciones('Mamá', state[k].mama);
  agregarTransacciones('Tarjetas', state[k].tarjetas);
  agregarTransacciones('Delivery', state[k].delivery);
  agregarTransacciones('Transporte', state[k].transporte);
  agregarTransacciones('Mascotas', state[k].mascotas);
  agregarTransacciones('Salud', state[k].salud);
  agregarTransacciones('Deportes', state[k].deportes);
  agregarTransacciones('Salidas', state[k].salidas);
  agregarTransacciones('Cochera', state[k].cochera);
  agregarTransacciones('Lucy', state[k].lucy);
  agregarTransacciones('Cristina', state[k].cristina);
  
  // Agregar ingresos
  if (state[k].sueldo) {
    state[k].sueldo.forEach(record => {
      transacciones.push({
        fecha: record.fecha,
        categoria: 'Sueldo',
        descripcion: 'Ingreso de sueldo',
        monto: record.monto,
        tipo: 'ingreso'
      });
    });
  }
  
  // Ordenar por fecha (más reciente primero)
  transacciones.sort((a, b) => new Date(b.fecha) - new Date(a.fecha));
  
  // Limitar a las 10 más recientes
  transacciones = transacciones.slice(0, 10);
  
  tbody.innerHTML = transacciones.map(trans => `
    <tr>
      <td>${formatDate(trans.fecha)}</td>
      <td>${trans.categoria}</td>
      <td>${trans.descripcion}</td>
      <td class="${trans.tipo === 'ingreso' ? 'income' : 'expense'}">${fmt(trans.monto)}</td>
      <td><span class="badge ${trans.tipo === 'ingreso' ? 'badge-success' : 'badge-danger'}">${trans.tipo === 'ingreso' ? 'Ingreso' : 'Gasto'}</span></td>
    </tr>
  `).join('');
  
  if (transacciones.length === 0) {
    tbody.innerHTML = `
      <tr>
        <td colspan="5" style="text-align: center; padding: 40px; color: #6b7280; font-style: italic;">
          No hay transacciones para mostrar
        </td>
      </tr>
    `;
  }
}

function loadResumenAnual() {
  // Implementación básica para vista anual
  document.getElementById('kpiIngresos').textContent = '--';
  document.getElementById('kpiGastos').textContent = '--';
  document.getElementById('kpiBalance').textContent = '--';
  document.getElementById('kpiAhorro').textContent = '--';
  
  document.getElementById('kpiIngresosTrend').innerHTML = '--';
  document.getElementById('kpiGastosTrend').innerHTML = '--';
  document.getElementById('kpiBalanceTrend').innerHTML = '--';
  document.getElementById('kpiAhorroTrend').innerHTML = '--';
  
  document.getElementById('gastosChartCanvas').innerHTML = '<p style="text-align: center; padding: 40px; color: #6b7280;">Vista anual en desarrollo</p>';
  document.getElementById('evolucionChartCanvas').innerHTML = '<p style="text-align: center; padding: 40px; color: #6b7280;">Vista anual en desarrollo</p>';
  document.getElementById('categoriasTableBody').innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 20px; color: #6b7280;">Vista anual en desarrollo</td></tr>';
  document.getElementById('transaccionesTableBody').innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 20px; color: #6b7280;">Vista anual en desarrollo</td></tr>';
}

function exportResumenData() {
  const k = ensureMonth();
  const data = {
    periodo: `${currentSelectedYear}-${(currentSelectedMonth + 1).toString().padStart(2, '0')}`,
    ingresos: calcularTotalIngresos(k),
    gastos: calcularTotalGastos(k),
    balance: calcularTotalIngresos(k) - calcularTotalGastos(k),
    ahorro: calcularAhorro(k),
    detalle: state[k]
  };
  
  const dataStr = JSON.stringify(data, null, 2);
  const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
  
  const exportFileDefaultName = `resumen_finanzas_${k}.json`;
  
  const linkElement = document.createElement('a');
  linkElement.setAttribute('href', dataUri);
  linkElement.setAttribute('download', exportFileDefaultName);
  linkElement.click();
}
</script>

<style>
.dashboard-container {
  padding: 20px;
}

.summary-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
  flex-wrap: wrap;
  gap: 15px;
}

.period-selector select {
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: white;
  color: #111827;
}

.kpi-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.kpi-card {
  background: white;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  border: 1px solid #e5e7eb;
  display: flex;
  align-items: center;
  gap: 16px;
}

.kpi-icon {
  width: 60px;
  height: 60px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  color: white;
}

.kpi-icon.income {
  background: linear-gradient(135deg, #10b981, #059669);
}

.kpi-icon.expense {
  background: linear-gradient(135deg, #ef4444, #dc2626);
}

.kpi-icon.balance {
  background: linear-gradient(135deg, #3b82f6, #2563eb);
}

.kpi-icon.savings {
  background: linear-gradient(135deg, #f59e0b, #d97706);
}

.kpi-content h3 {
  margin: 0 0 8px 0;
  font-size: 0.9rem;
  color: #6b7280;
  font-weight: 600;
}

.kpi-value {
  font-size: 1.8rem;
  font-weight: 700;
  color: #111827;
  margin-bottom: 4px;
}

.kpi-trend {
  font-size: 0.8rem;
  font-weight: 600;
}

.charts-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  margin-bottom: 30px;
}

.chart-container, .table-container {
  background: white;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  border: 1px solid #e5e7eb;
}

.chart-container h3, .table-container h3 {
  margin: 0 0 20px 0;
  font-size: 1.1rem;
  color: #111827;
  font-weight: 600;
}

.chart-placeholder {
  height: 300px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f8fafc;
  border-radius: 8px;
  border: 2px dashed #d1d5db;
}

.full-width {
  grid-column: 1 / -1;
}

.table-responsive {
  overflow-x: auto;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  padding: 12px 16px;
  text-align: left;
  border-bottom: 1px solid #e5e7eb;
}

th {
  background: #f8fafc;
  font-weight: 600;
  color: #374151;
  font-size: 0.9rem;
}

td.income {
  color: #10b981;
  font-weight: 600;
}

td.expense {
  color: #ef4444;
  font-weight: 600;
}

.badge {
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.8rem;
  font-weight: 600;
}

.badge-success {
  background: #d1fae5;
  color: #065f46;
}

.badge-danger {
  background: #fee2e2;
  color: #991b1b;
}

.progress-bar {
  position: relative;
  height: 24px;
  background: #f3f4f6;
  border-radius: 12px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  border-radius: 12px;
  transition: width 0.3s ease;
}

.progress-fill.success {
  background: #10b981;
}

.progress-fill.warning {
  background: #f59e0b;
}

.progress-fill.danger {
  background: #ef4444;
}

.progress-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 0.8rem;
  font-weight: 600;
  color: white;
  text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

@media (max-width: 768px) {
  .charts-grid {
    grid-template-columns: 1fr;
  }
  
  .kpi-cards {
    grid-template-columns: 1fr;
  }
  
  .summary-header {
    flex-direction: column;
    align-items: stretch;
  }
}
</style>